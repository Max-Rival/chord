syntax = "proto3";

service chordRPC {

  rpc getPredecessor (empty) returns (getPredecessorResponse) {}
  rpc getSuccessorList (empty) returns (getSuccessorListResponse) {}
  rpc findSuccessor (findSuccessorRequest) returns (findSuccessorResponse) {}

  rpc echo (echoRequest) returns (empty) {}
  rpc ping (timestamp) returns (timestamp) {}
  rpc notify (notifyRequest) returns (empty) {}
  rpc get (getRequest) returns (getResponse) {}
  rpc set (bucketEntry) returns (empty) {}
  rpc getAll(getRequest) returns (getAllResponse) {}
  rpc setAll(setAllRequest) returns (empty) {}
}

message echoRequest {
  string msg = 1;
  string addr = 2;
}

message empty {}

message timestamp {
  int64 secs = 1;
  int32 nans = 2;
}

message getPredecessorResponse {
  string addr = 1;
}

message getSuccessorResponse {
  string addr = 1;
}

message getSuccessorListResponse {
  repeated string addrs = 1;
}

message findSuccessorRequest {
  bytes id = 1;
}

message findSuccessorResponse {
  string addr = 1;
}

message notifyRequest {
  string addr = 1;
}

message getRequest {
  bytes id = 1;
}

message getResponse {
  bytes val = 1;
}

message bucketEntry {
  bytes id = 1;
  bytes val = 2;
}

message getAllRequest {
  bytes id = 1;
}

message getAllResponse {
  repeated bucketEntry bucketEntries = 1;
}

message setAllRequest {
  repeated bucketEntry bucketEntries = 1;
}
