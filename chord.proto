syntax = "proto3";

service chordRPC {

  rpc getPredecessor (empty) returns (getPredecessorResponse) {}
  rpc getSuccessorList (empty) returns (getSuccessorListResponse) {}
  rpc findSuccessor (findSuccessorRequest) returns (findSuccessorResponse) {}

  rpc echo (echoRequest) returns (empty) {}
  rpc ping (timestamp) returns (timestamp) {}
  rpc notify (notifyRequest) returns (empty) {}
  rpc get (getRequest) returns (getResponse) {}
  rpc set (setRequest) returns (empty) {}

}

message echoRequest {
  string msg = 1;
  string addr = 2;
}

message empty {}

message timestamp {
  int64 secs = 1;
  int32 nans = 2;
}

message getPredecessorResponse {
  string addr = 1;
}

message getSuccessorResponse {
  string addr = 1;
}

message getSuccessorListResponse {
  repeated string addr = 1;
}

message findSuccessorRequest {
  bytes hash = 1;
}

message findSuccessorResponse {
  string addr = 1;
}

message notifyRequest {
  string addr = 1;
}

message getRequest {
  bytes hash = 1;
}

message getResponse {
  bytes val = 1;
}

message setRequest {
  bytes hash = 1;
  bytes val = 2;
}
